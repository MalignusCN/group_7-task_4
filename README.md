## 实践作业4——“工小锤”微信小程序服务器端开发

编辑时间：4月29日

---

### 作业要求

截止时间：5月22日（约3周后）

> #### 开发任务
> 
> 1. 理解 web 应用程序的三层架构（表示层、处理层、数据层）
> 
> 2. “重构”程序，在服务器端设计并实现处理层和数据层：  
>    - 原有功能不变，但数据需要存储在数据库中，并通过与数据库交互来操作数据
> 
> 3. 实现新功能：  
>    - 在新闻首页添加搜索功能，根据输入的标题关键字、新闻事件查找相应的新闻
> 
> #### 开发方法
> 
> [小程序-云开发](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html)
> 
> #### 系统部署
> 
> - 开发完毕后，提交腾讯审核。  
> - 审核通过后，即可被公共访问  
> - 不再需要单独对我进行授权  
> 
> #### 系统验收
> - 在课堂派提交  
>   - 小程序-云开发：程序的二维码+程序运行视频（可选）  
>   - 独立配置：程序运行视频  
>   - 工作量说明（每人的工作量值域[0,100]，所有组员工作量总和为 100）
>   - 个人心得体会（字数不限）。开发过程中的种种经验、教训、心得、吐槽、建议等等。

### 计划本组工作内容

1. 不在原有的基础上修改，重写一个新的项目
2. 新闻内容：爬取 my.bjut.edu.cn 上的真实内容
3. 新闻内容的形式：包括
   1. 标题
   2. 发布时间
   3. 发布者
   4. 文字内容
   5. 图片
   6. (视情况) 表格
4. 使用小程序·云开发的数据库存储文本信息
5. 使用云开发存储相关图片
6. 重构UI，使用组件库（[WEUI](https://developers.weixin.qq.com/miniprogram/design/#%E8%B5%84%E6%BA%90%E4%B8%8B%E8%BD%BD)?）

### 工作内容分解

1. 数据爬取：从 my 网上爬取相应信息，并把内容存储到 json 文件中
2. 数据库调试：
   - 在云开发数据库中导入爬取的数据
   - 找出在代码中读取云端数据库的方法
   - 找到如何利用云端存储和读取图片文件（数据库貌似只能存储文字）
   - 搜索功能
3. 前端设计：调取数据库，（利用组件库）设计图形界面

#### 大致工作量

1. 数据爬取：1
2. 数据库调试：3
3. 前端设计：1

#### 工作内容分配

- 张启琳: 数据爬取
  - 爬取新闻的标题、发布者、发布时间、内容文字、内容图片；完成后尝试爬取表格（有同学做过，好像不难）
  - 根据网站的板块进行新闻分类
  - 爬取后的内容放入json文件，便于后期导入数据库
  - 需要考虑json数据库的结构是怎么样的
- 王毅康: 数据库调试 - 实现搜索功能
  - 可以先用自己虚构的数据进行测试
  - 思路（？）：前端传参（如何传参？参数除了关键字，还能有哪些信息？可能用到云函数？）-> 云端搜索（如何搜索？） -> 结果返回（如何返回？接口格式？）
  - 最终的成果：搜索算法，与前端传参数、取返回值的示例代码
- 王宇浩: 数据库调试 - 实现云端存储图片
  - 可以先用自己虚构的数据进行测试（有几条假新闻，每条新闻里有几张图片），数据为json格式
  - 思路（？）：前端传参（如何传参？也许能在新闻的数据库里有一个字段，专门存储图片的名称与云端路径，每个新闻包含的图片指向相应的图片存储位置，显示的时候根据路径从云端调取图片？）-> 结果返回（是直接返回图片文件吗？）
  - 最终的成果：前端传参数、获取图片的示例代码
- 王炫皓: 数据库调试 - 实现json的存储与读取
  - 可以先用自己虚构的数据进行测试（有几条假新闻，每条新闻里标题、发布者、发布时间、内容文字信息是都有的），数据为json格式
  - 如何把这个json存储在云服务数据库里？前端怎么根据请求获取数据库相应位置的信息？
  - 其实和王毅康、王宇浩的工作有一定重叠。。。不过感觉还是值得做的
- 应屹: 前端设计
  - WEUI框架？

#### 操作相关（？）
- 如果自己工作有卡住的地方，要不在群里说一下？大家可以找找相应的网上教程链接，互相帮助
- 有的任务可能很快就能完成？可能工作还是有分配不合理的地方，有问题就在群里讨论吧
- 还和之前一样，每个人建立自己的分支；不过最后是计划全部合并回master的，所以工作完成之后，还是先把自己的工作内容整理到最终项目中，再合并回去吧..我之后新建一个主项目，每个人的工作就是先拿到主项目代码，想办法把自己的内容添加到主项目里。当然在合并之前可以先自己在自己的项目里测试或者是commit；自己的项目可以合并分支前再删